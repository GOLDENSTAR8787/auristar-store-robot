<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>🌟Auristar 遊戲 商城 專業客服機器人</title>
<style>
  /* 全局樣式 */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    height: 100vh;
    background: linear-gradient(-45deg, #1e1e2f, #202042, #2a2a5a, #1e1e2f);
    background-size: 400% 400%;
    animation: gradient 15s ease infinite;
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    color: white;
    display: flex;
    flex-direction: column;
  }
  @keyframes gradient {
    0% {background-position: 0% 50%;}
    50% {background-position: 100% 50%;}
    100% {background-position: 0% 50%;}
  }
  header {
    padding: 15px 20px;
    background: rgba(0,0,0,0.7);
    font-size: 1.2rem;
    font-weight: bold;
    user-select: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  header small {
    font-weight: normal;
    font-size: 0.85rem;
    opacity: 0.7;
  }
  #chatbox {
    flex: 1;
    display: flex;
    flex-direction: column;
    max-width: 700px;
    margin: 10px auto 20px;
    background: rgba(0, 0, 0, 0.7);
    border-radius: 20px;
    box-shadow: 0 0 30px rgba(0,0,0,0.5);
    overflow: hidden;
  }
  #messages {
    flex: 1;
    padding: 15px 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
    scroll-behavior: smooth;
  }
  .message {
    max-width: 75%;
    margin-bottom: 12px;
    padding: 10px 14px;
    border-radius: 20px;
    position: relative;
    word-wrap: break-word;
    line-height: 1.3;
    white-space: pre-wrap;
  }
  .message.user {
    background: #4e86ff;
    align-self: flex-end;
    border-radius: 20px 20px 0 20px;
    text-align: right;
    direction: rtl;
  }
  .message.user > .text {
    direction: ltr;
    display: inline-block;
  }
  .message.bot {
    background: #333;
    align-self: flex-start;
    border-radius: 20px 20px 20px 0;
    text-align: left;
  }
  .message .meta {
    font-size: 0.75rem;
    color: #a0a0a0;
    margin-top: 4px;
    user-select: none;
  }
  .thinking {
    font-style: italic;
    opacity: 0.6;
    animation: blink 1.4s infinite;
  }
  @keyframes blink {
    0%, 100% { opacity: 0.2; }
    50% { opacity: 0.6; }
  }
  #inputArea {
    display: flex;
    padding: 15px 20px;
    background: rgba(0,0,0,0.85);
    border-top: 1px solid #555;
  }
  #username {
    width: 150px;
    padding: 10px 15px;
    border-radius: 20px;
    border: none;
    outline: none;
    font-size: 16px;
    margin-right: 10px;
    background: #222;
    color: white;
  }
  #userinput {
    flex: 1;
    padding: 10px 15px;
    border-radius: 20px;
    border: none;
    outline: none;
    font-size: 16px;
    background: #222;
    color: white;
  }
  #sendBtn {
    background: #4e86ff;
    color: white;
    border: none;
    border-radius: 20px;
    padding: 0 25px;
    margin-left: 10px;
    cursor: pointer;
    font-weight: bold;
    transition: background 0.3s ease;
  }
  #sendBtn:disabled {
    background: #666;
    cursor: not-allowed;
  }
  #quickButtons {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    background: rgba(0,0,0,0.6);
    padding: 8px 10px;
    border-radius: 0 0 20px 20px;
    max-width: 700px;
    margin: 0 auto 10px;
  }
  .quick-btn {
    background: #4e86ff;
    border: none;
    border-radius: 12px;
    color: white;
    cursor: pointer;
    margin: 5px 7px;
    padding: 8px 15px;
    font-size: 14px;
    user-select: none;
    transition: background 0.3s ease;
  }
  .quick-btn:hover {
    background: #1e50ff;
  }
  /* 禁用提示 */
  #disableAlert {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: #ff4444cc;
    padding: 10px 20px;
    border-radius: 25px;
    font-weight: bold;
    color: white;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: 9999;
  }
  #disableAlert.show {
    opacity: 1;
    pointer-events: auto;
  }
</style>
</head>
<body>
<header>
  🌟Auristar 遊戲 商城 專業客服機器人
  <small>製作人/訓練者：金佐陳</small>
</header>

<div id="chatbox" role="main" aria-label="聊天室">
  <div id="messages" aria-live="polite" aria-relevant="additions"></div>
  <div id="quickButtons" aria-label="快捷選項"></div>
  <div id="inputArea">
    <input id="username" type="text" placeholder="請輸入名稱..." aria-label="使用者名稱" autocomplete="off" />
    <input id="userinput" type="text" placeholder="請輸入訊息..." aria-label="訊息輸入" autocomplete="off" />
    <button id="sendBtn" disabled>送出</button>
  </div>
</div>

<div id="disableAlert" role="alert" aria-live="assertive"></div>

<script>
(() => {
  'use strict';

  const webhookUrl = 'https://discord.com/api/webhooks/1397161969194373151/1-rG0NXQ7c8B-HIPXm2_yvTThVBvFs-i0-2T5gnXRLSUoOzU_qJl93y6wBVY9fZTX_Be';

  const messages = document.getElementById('messages');
  const usernameInput = document.getElementById('username');
  const userInput = document.getElementById('userinput');
  const sendBtn = document.getElementById('sendBtn');
  const quickButtonsDiv = document.getElementById('quickButtons');
  const disableAlert = document.getElementById('disableAlert');

  // 初始歡迎訊息
  const welcomeMsg = '歡迎來到 Auristar商城 專業人機客服系統，請輸入你的問題或關鍵字.......';

 // 關鍵字與回覆資料
const responses = [
  { keywords: ['嗨', '哈囉', '你好', 'hi', 'hellow', '早安', '午安', '晚安', '安安', '在嗎', '有人嗎'], reply: '您好！請問需要什麼幫助？' },
  { keywords: ['Auristar 遊戲 商城'], reply: '🌟Auristar 遊戲 商城Auristar — 星耀遊戲商城，由你主宰Auristar 是一個專注於 遊戲代儲、代購與交易服務 的全方位商城平台，結合閃耀的金色星光與專業團隊，為每一位玩家帶來安心、快速又潮流的遊戲體驗。為什麼選擇 Auristar？🛡️ 安全誠信可靠📞 快速回應客服💎 多年遊戲圈經驗🔥 不定期限時活動 & 優惠回饋' },
  { keywords: ['?', '蝦', '蛤', 'ㄏㄚˊ', '什麼', '聽無', '聽不懂', '不懂', '不太懂', '什麼意思', '看不懂', '搞不懂','幹啥的'], reply: '輸入你的問題來讓我回答，就可以解開你心中的疑惑歐~~' },
  { keywords: ['買', '購買', '商品', '品項', '價格'], reply: '你想要查詢什麼的價格或是購買什麼東西呢？請說明' },
  { keywords: ['聯絡方式', '資訊'], reply: '請說官網' },
  { keywords: ['代購', '代買'], reply: '你想要查詢什麼的代購呢？' },
  { keywords: ['roblox', 'ROBLOX', 'RB', 'Roblox', 'rb', '羅布克斯'], reply: '你要查詢roblox哪類商品呢？' },
  { keywords: ['代儲'], reply: '你要哪個遊戲的代儲呢？' },

  // 商品價格
  { keywords: ['九尾狐'], reply: '九尾狐 ➤ NT$1900，要訂購請說內容並說送出' },
  { keywords: ['Disco蜂', 'disco蜂'], reply: 'Disco蜂 ➤ NT$400，要訂購請說內容並說送出' },
  { keywords: ['蝴蝶'], reply: '蝴蝶 ➤ NT$200，要訂購請說內容並說送出' },
  { keywords: ['女王蜂'], reply: '女王蜂 ➤ NT$150，要訂購請說內容並說送出' },
  { keywords: ['蜻蜓'], reply: '蜻蜓 ➤ NT$200，要訂購請說內容並說送出' },
  { keywords: ['浣熊'], reply: '浣熊 ➤ NT$300，要訂購請說內容並說送出' },
  { keywords: ['浣熊10', '浣熊*10', '浣熊10隻'], reply: '浣熊*10 ➤ NT$2800，要訂購請說內容並說送出' },
  { keywords: ['狐狸'], reply: '狐狸 ➤ NT$100，要訂購請說內容並說送出' },
  { keywords: ['殭屍雞'], reply: '殭屍雞 ➤ NT$100，要訂購請說內容並說送出' },
  { keywords: ['暴龍'], reply: '暴龍 ➤ NT$200，要訂購請說內容並說送出' },
  { keywords: ['雷龍'], reply: '雷龍 ➤ NT$100，要訂購請說內容並說送出' },
  { keywords: ['章魚'], reply: '章魚 ➤ NT$200，要訂購請說內容並說送出' },
  { keywords: ['耳廓狐'], reply: '耳廓狐 ➤ NT$250，要訂購請說內容並說送出' },
  { keywords: ['月貓'], reply: '月貓 ➤ NT$70，要訂購請說內容並說送出' },
  { keywords: ['血月刺蝟'], reply: '血月刺蝟 ➤ NT$70，要訂購請說內容並說送出' },
  { keywords: ['744T植物'], reply: '744T植物 ➤ NT$15，要訂購請說內容並說送出' },
  { keywords: ['60歲寵'], reply: '60歲寵 ➤ NT$100，要訂購請說內容並說送出' },
  { keywords: ['75歲寵'], reply: '75歲寵 ➤ NT$150，要訂購請說內容並說送出' },

  // Robux代儲
  {
    keywords: ['roblox代儲', 'ROBLOX代儲', 'RB代儲', 'Roblox代儲', 'rb代儲', 'robux'],
    reply: `如要購買請說：「我要買XXX Robux」並說送出，目前只開放面額如下：
400 Robux → NT$160
800 Robux → NT$300
1700 Robux → NT$600
2500 Robux → NT$900
4500 Robux → NT$1450
10000 Robux → NT$2800
22500 Robux → NT$5600`
  },

  // GAG商品
  {
    keywords: ['培養花園', 'gag', 'GAG', 'grow a garden', 'Grow a garden', 'GROW A GARDEN'],
    reply: `🌱 商品列表
📦 EXOTIC ZEN SEED PACK
x3（575R） ➤ NT$130
x10（1699R） ➤ NT$330

🥚 PREMIUM PRIMAL EGG
x3（429R） ➤ NT$100
x10（1269R） ➤ NT$250

🐾 PET 寵物專區
九尾狐 ➤ NT$1900
Disco蜂 ➤ NT$400
蝴蝶 ➤ NT$200
女王蜂 ➤ NT$150
蜻蜓 ➤ NT$200
浣熊 ➤ NT$300      浣熊*10 ➤ NT$2800
狐狸 ➤ NT$100
殭屍雞 ➤ NT$100
暴龍 ➤ NT$200
雷龍 ➤ NT$100
章魚 ➤ NT$200
耳廓狐 ➤ NT$250
月貓 ➤ NT$70
血月刺蝟 ➤ NT$70
744T植物 ➤ NT$15
60歲寵 ➤ NT$100
75歲寵 ➤ NT$150

如果要購買，請直接照名稱和數量打到聊天室中,並說送出。`
  },
    { keywords: ['折扣', '優惠', '打折', '折價'], reply: '請見DC群 (轉移頁面到 <a href="https://discord.gg/jt4ZvhnCDQ" target="_blank">https://discord.gg/jt4ZvhnCDQ</a>)' },
{ keywords: ['特殊活動', '好康', '抽獎', '抽抽樂'], reply: '請見DC群 (轉移頁面到 <a href="https://discord.gg/jt4ZvhnCDQ" target="_blank">https://discord.gg/jt4ZvhnCDQ</a>)' },
{ keywords: ['官網', '官方網站'], reply: '將你轉跳到官網 (<a href="https://goldenstar8787.github.io/auristar-on-line--store-/" target="_blank">https://goldenstar8787.github.io/auristar-on-line--store-/</a>)' },
{ keywords: ['轉人工', '找客服'], reply: '請到DC群開單或FB找金佐陳詢問 (<a href="https://discord.gg/jt4ZvhnCDQ" target="_blank">Discord</a> / <a href="https://www.facebook.com/jin.zuo.chen.2025" target="_blank">Facebook</a>)' },
{ keywords: ['談合作', '合作', '招商'], reply: '請說明你目前經營的平台名稱及合作想法,說明完畢後請說「送出」，並到DC開單詢問' },
{ keywords: ['互相宣傳'], reply: '請詳細說明，說明完畢後請說「送出」，並到DC開單詢問' },
{ keywords: ['有人嗎', '有人在嗎'], reply: '嗨～我們有自動客服陪你聊天喔，有問題可以直接問！' },
{ keywords: ['機器人', '自動'], reply: '是的～我們的自動客服能幫你處理基本問題～' },
{ keywords: ['你是誰', '你哪位','你誰'], reply: '我是Auristar自動小幫手，有任何問題都可以問我唷！' },
{ keywords: ['說明完畢', '送出', '完成'], reply: '紀錄已送出 將轉移頁面到 <a href="https://discord.gg/jt4ZvhnCDQ" target="_blank">https://discord.gg/jt4ZvhnCDQ</a>)', webhook: true },
{ keywords: ['應徵', '面試', '代理', '徵人','怎麼加入', '我要加入'], reply: '請說你的名字，和有無經驗，有經驗請說有經驗，無經驗請說無經驗' },
{ keywords: ['有經驗', '無經驗'], reply: '請說你的年齡，能不能常發文，是否有誠文？回答完成請說「完成」' },
{ keywords: ['回報', '我有問題', '提問', '疑問', '疑惑'], reply: '請說明你的問題，說明完成後請說：「送出」' },
{ keywords: ['我要', '我想要','開單', '我要開單','怎麼買', '如何訂購', '要怎麼下單'], reply: '請到訂購區訂購或到DC開單 (<a href="https://discord.gg/jt4ZvhnCDQ" target="_blank">Discord</a> 和 <a href="https://goldenstar8787.github.io/auristar-on-line--store-/" target="_blank">官網</a>)' },
{ keywords: ['再見', '掰掰', '掰'], reply: '感謝你的使用 :3' },
{ keywords: ['條款', '訂購注意事項', '訂購前注意事項', '下單注意事項', '下單前注意事項'], reply: '自行轉跳到 <a href="https://goldenstar8787.github.io/Mall-Terms/" target="_blank">https://goldenstar8787.github.io/Mall-Terms/</a>' },
  { keywords: ['帥', '騷', '美', '可愛', '漂亮', '結婚', '男朋友', '女朋友','吃我'], reply: '真的好臭' },
  { keywords: ['怎麼沒', '好吧', '痾','好喔'], reply: '抱歉，開發中，可考慮轉人工' },
  { keywords: ['幹', '靠北'], reply: ['你是不是沒吃藥？', '嘴巴這麼臭，牙齒還好嗎？'] },
  { keywords: ['垃圾', '婊子', '你嗎逼'], reply: ['先照照鏡子再來吵好嗎？', '講這種話不會覺得丟臉嗎？'] },
  { keywords: ['你媽', '媽的', '死', '操你嗎'], reply: ['嘴巴這麼臭，牙齒還好嗎？', '你是不是沒朋友所以在這邊吵？'] },
  { keywords: ['幹', '幹你', '幹爆', '幹拎娘'], reply: ['你這麼會幹，怎麼不去幹點正事？', '嘴巴臭不是你的錯，但不刷牙就是。'] },
  { keywords: ['靠北', '靠腰', '靠么', '哩北'], reply: ['你靠的是北還是沒水準？', '靠北可以，但你要先會講道理。'] },
  { keywords: ['智障', '腦殘', '白癡', '低能兒'], reply: ['你是不是 IQ 貼地在爬？', '當你講話的時候，智商應該在休假。'] },
  { keywords: ['垃圾', '廢物', '爛', '屁'], reply: ['你是在講自己還是在照鏡子？', '連 AI 都覺得你沒營養。'] },
  { keywords: ['婊子', '賤人', '臭三八', '母豬'], reply: ['尊重別人前，先學會做人好嗎？', '嘴那麼毒，是因為你吃太多垃圾？'] },
  { keywords: ['你媽', '死媽', '媽的', '你娘'], reply: ['不准扯家人，吵輸才會扯人家媽媽。', '吵不過就罵媽，幼稚園畢業了沒？'] },
  { keywords: ['死', '去死', '死全家', '早死'], reply: ['你活著都沒什麼用，別詛咒別人。', '咒人死前先照照自己有多失敗。'] },
  { keywords: ['三小', '殺小', '沙小', '啥小'], reply: ['講不出完整的句子只會「三小」？', '你是不是詞窮了？'] },
  { keywords: ['機掰', '雞掰', '雞巴', '雞歪','懶叫'], reply: ['嘴巴別再長那部位了，好嗎？', '說這種話，你爸媽知道嗎？'] },
  { keywords: ['娘砲', '臭甲', '娘娘腔'], reply: ['歧視別人不會讓你更有種。', '講這種話只顯得你沒自信。'] },
  { keywords: ['閉嘴', '滾', '屁話'], reply: ['你不說話大家會感謝你。', '你有話想講，請先學怎麼講。'] },
  { keywords: ['北七', '八嘎', '阿呆', '蠢','閉嘴'], reply: ['你這智商該繳低收入戶申請。', '連 Google 都搜不到你的邏輯。'] },
  { keywords: ['靠邀', '幹你娘', '幹你媽'], reply: ['情緒激動了？要不要喝口水冷靜冷靜？', '這樣講話，是不是媽教你的？'] },
  { keywords: ['死瘋子', '瘋子', '神經病'], reply: ['你是來給我開心的嗎？', '別人瘋了至少還有人愛，你呢？'] },
  { keywords: ['智障啊', '白癡啊', '腦殘啊'], reply: ['用詞可以更有創意，這樣太沒新意了。', '你才需要補補腦呢！'] },
  { keywords: ['靠杯', '靠北啦'], reply: ['靠杯歸靠杯，請講點正經事行嗎？', '嘴巴這麼重，家人知道嗎？'] },
  { keywords: ['操你爸'], reply: ['這樣髒話發洩不會比較爽啦，來，換個方式講話吧。', '家教沒教嗎？要不要我幫你找回憶錄？'] },
  { keywords: ['屁孩', '小屁孩'], reply: ['屁孩就是愛吵，等你長大再說。', '給你三秒安靜，開始！'] },
  { keywords: ['傻逼', '低能'], reply: ['你的詞彙量怎麼只有這些？', '多學點新詞彙比較好唷！'] },
  { keywords: ['王八蛋', '混蛋', '死變態'], reply: ['你這麼壞，怕不是連路都走不好吧？', '這樣罵人有點弱喔，要不要來點猛的？'] },
  { keywords: ['噁心', '討厭', '髒東西'], reply: ['你這樣說自己還不反省？', '討厭是會傳染的，你確定你沒中？'] },
  { keywords: ['腦袋壞掉', '笨蛋', '腦殘粉'], reply: ['你的腦袋是不是進水了？', '多用用腦子，少用嘴巴。'] },
  { keywords: ['死丫頭', '死臭蟲'], reply: ['這麼說人家，是不是怕人家變成真的？', '愛罵人，但不敢當面，勇氣呢？'] },
  { keywords: ['二百五', '白癡蛋'], reply: ['二百五的傳說由你繼續書寫中。', '聽起來你比他還慘。'] },
  { keywords: ['爛', '很爛', '不好用'], reply: '真的嗎？可否告訴我哪裡不滿意，我們會努力改進的（但請不要只會嘴巴哦）' },
{ keywords: ['假的', '詐騙'], reply: '如果是詐騙，我怎麼還能跟你講話呢XD 有疑慮也可直接找FB金佐陳確認喔' },
{ keywords: ['你在幹嘛', '你到底在幹嘛'], reply: '正在陪你聊天呀，要不要來點有建設性的問題？😉' },
{ keywords: ['你會不會做事', '你不會'], reply: '我會做事，但你有沒有提出清楚的問題就是另一回事了耶～' },
{ keywords: ['廢', '沒用', '幹嘛用的'], reply: '我的存在就是來服務的，但要看你會不會問對問題，不然再厲害的我也幫不了你🙃' },
{ keywords: ['不專業'], reply: '感謝你的意見，我會改進，也歡迎你來教教我什麼叫「專業」！' },
{ keywords: ['小學生喔','傻子','唐','低能','智障','白癡','沒腦'], reply: '你媽媽沒生給你腦子嗎？國小生嗎這什麼中二發言 你爸媽管不好你可以讓我管 還背後捅一刀勒 在唐什麼 可不可以講話不要跟啞巴一樣 我說10句你只會說一句 沒學好說話你要嗆人找啞巴好了 哪怕是個老奶奶講幾句你都快要哭了 別人罵完發現你字才打到一半 你就只會呃呃呃呃閉嘴呃呃呃滾說你國小都高看你了 能不能說有殺傷力的啊 還是你國小老師只教你這個好可憐喔要不要爸爸教你' },
{ keywords: ['ha', '哈'], reply: 'hahahahahahahahahahahahahahahahahaha' }  //從這開始改

  ];
  // 商品資訊（快捷按鈕及回覆）
  const productInfo = {
    'Robux 面額': `💰 Robux 面額（常見購買額度）
目前只開放面額如下：
➡️ 400 Robux　→ NT$160
➡️ 800 Robux　→ NT$300
➡️ 1700 Robux → NT$600
➡️ 2500 Robux → NT$900
➡️ 4500 Robux → NT$1450
➡️ 10000 Robux → NT$2800
➡️ 22500 Robux → NT$5600
📌 下單指令： 如要訂購請說你要訂購的內容並說：送出`,

    'Grow a Garden｜培養花園': `🌱 商品包裝與價格
種子包（Seed Pack）
EXOTIC ZEN SEED PACK x3（575R）
EXOTIC ZEN SEED PACK x10（1699R）
寵物蛋（Egg）
PREMIUM PRIMAL EGG x3（429R）
PREMIUM PRIMAL EGG x10（1269R）
🐾 PET 寵物專區
九尾狐 ➤ NT$1900

Disco蜂 ➤ NT$400

蝴蝶 ➤ NT$200

女王蜂 ➤ NT$150

蜻蜓 ➤ NT$200

浣熊 ➤ NT$300      浣熊*10 ➤ NT$2800

狐狸 ➤ NT$100

殭屍雞 ➤ NT$100

暴龍 ➤ NT$200

雷龍 ➤ NT$100

章魚 ➤ NT$200

耳廓狐 ➤ NT$250

月貓 ➤ NT$70

血月刺蝟 ➤ NT$70


744T植物 ➤ NT$15


60歲寵 ➤ NT$100

75歲寵 ➤ NT$150
📌 下單指令： 如要訂購請說你要訂購的內容並說：送出`,

    '競爭者': `競爭者

🎁 皮膚箱 Skin Cases
📦 Skin Case 1 x1 → NT$70
📦 Skin Case 2 x1 → NT$70
📦 Skin Case 3 x1 → NT$70

🎟️ 通行證組合包 Pass Bundles
💥 RPG 組合包 → NT$60
🔋 能源組合包 (1299R) → NT$280
👽 外星組合包 (649R) → NT$160
💉 醫療組合包 (249R) → NT$80
🛡️ 重型組合包 (1899R) → NT$410
🎖️ 經典組合包 (1149R) → NT$260
🔫 普通武器組合包 (999R) → NT$220
🟣 像素組合包 (888R) → NT$200
🎯 初學者組合包 (49R) → NT$40
🔑 超級鑰匙組合包 (2199R) → NT$500
👑 傳奇鑰匙組合包 (4999R) → NT$1000
📌 下單指令： 如要訂購請說你要訂購的內容並說：送出`,

    'bf永久果實': `🍇 果實能力
🔥 火焰 → NT$120
🐦 獵鷹 → NT$210
❄️ 冰凍 → NT$150
🏖️ 沙子 → NT$170
🌑 黑暗 → NT$190
💎 鑽石 → NT$210
⚡ 閃閃 → NT$240
🍉 橡膠 → NT$250
🌀 創造 → NT$340
💀 復活 → NT$270
🌋 岩漿 → NT$280
🌍 地震 → NT$300
🙏 人佛 → NT$320
❤️ 愛情 → NT$330
🌐 線線 → NT$340
🔊 聲音 → NT$360
🚪 門門 → NT$380
🦅 鳳凰 → NT$380
⚡ 響雷 → NT$400
🐾 爪子 → NT$410
❄️ 雪雪 → NT$420
🌍 重力 → NT$440
🐘 猛瑪 → NT$440
🦖 暴龍 → NT$440
🍞 麵糰 → NT$450
🌑 影子 → NT$460
☠️ 毒液 → NT$470
🎮 控制 → NT$480
💨 瓦斯 → NT$490
👻 靈魂 → NT$500
🐆 獵豹 → NT$600
👹 雪怪 → NT$600
🐾 九尾 → NT$800
🐉 龍龍 → NT$1000
📌 下單指令： 如要訂購請說你要訂購的內容並說：送出`,

    'bf通行證和果倉': `通行證和果倉
💎 通行證
🔁 雙倍掉落物 → NT$90
🚤 快船 → NT$90
💰 雙倍金錢 → NT$110
🧠 雙倍精通 → NT$110
🗡️ 黑刀 → NT$250
🔎 果探 → NT$550

🍊 果倉
📦 果倉 x1 → NT$100
📦 果倉 x3 → NT$270
📦 果倉 x5 → NT$430
📦 果倉 x10 → NT$850 

📌 下單指令： 如要訂購請說你要訂購的內容並說：送出`
  };

  // 快捷按鈕關鍵字
  const quickKeys = Object.keys(productInfo);

  // 防止 F12, 右鍵等開發者工具
  function disableDevTools() {
    window.addEventListener('keydown', e => {
      if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'C' || e.key === 'J')) || (e.ctrlKey && e.key === 'U')) {
        e.preventDefault();
        showDisableAlert('功能已被禁止');
      }
    });
    window.addEventListener('contextmenu', e => {
      e.preventDefault();
      showDisableAlert('功能已被禁止');
    });
  }
  function showDisableAlert(msg) {
    disableAlert.textContent = msg;
    disableAlert.classList.add('show');
    setTimeout(() => disableAlert.classList.remove('show'), 2500);
  }

  // 新增訊息
  function addMessage(sender, text, type, thinking = false) {
    const msgDiv = document.createElement('div');
    msgDiv.classList.add('message', type);
    if(type === 'user') {
      // user訊息泡泡靠右，文字正常顯示
      msgDiv.style.direction = 'rtl';
      msgDiv.style.textAlign = 'right';
      msgDiv.innerHTML = `<span class="text" style="direction:ltr;">${text}</span>
      <div class="meta">${sender} • ${new Date().toLocaleTimeString()}</div>`;
    } else {
      // bot訊息靠左
      msgDiv.style.direction = 'ltr';
      msgDiv.style.textAlign = 'left';
      if (thinking) {
        msgDiv.innerHTML = `<span class="thinking">正在思考中...</span>`;
      } else {
        msgDiv.innerHTML = `${text}<div class="meta">${sender} • ${new Date().toLocaleTimeString()}</div>`;
      }
    }
    messages.appendChild(msgDiv);
    messages.scrollTop = messages.scrollHeight;
    return msgDiv;
  }

  // 判斷輸入文字回覆
  function getReply(text) {
    text = text.toLowerCase();
    for (const item of responses) {
      for (const kw of item.keywords) {
        if (text.includes(kw.toLowerCase())) {
          return item;
        }
      }
    }
    return null;
  }

  // 送Webhook紀錄
  async function sendDiscordWebhook(username, content) {
    try {
      await fetch(webhookUrl, {
        method: 'POST',
        headers: {'Content-Type':'application/json'},
        body: JSON.stringify({
          username: username || '訪客',
          content: content
        })
      });
      return true;
    } catch (e) {
      return false;
    }
  }

  // 快捷按鈕產生
  function createQuickButtons() {
    quickButtonsDiv.innerHTML = '';
    quickKeys.forEach(key => {
      const btn = document.createElement('button');
      btn.className = 'quick-btn';
      btn.textContent = key;
      btn.title = '點擊查看 ' + key + ' 詳細資訊';
      btn.addEventListener('click', () => {
        addMessage('使用者', key, 'user');
        addBotReply(productInfo[key]);
      });
      quickButtonsDiv.appendChild(btn);
    });
  }

  // 機器人回覆（含思考動畫）
  function addBotReply(replyText, sendWebhook = false, userName = '') {
    const thinkingMsg = addMessage('機器人', '', 'bot', true);

    setTimeout(async () => {
      thinkingMsg.remove();
      addMessage('機器人', replyText, 'bot');

      // 如果要送Webhook(通常送出訂單)
      if (sendWebhook) {
        const chatLog = Array.from(messages.querySelectorAll('.message')).map(m=>{
          let sender = m.classList.contains('user') ? '使用者' : '機器人';
          let content = m.classList.contains('user') ? m.querySelector('.text').textContent : m.childNodes[0].textContent;
          return `${sender}: ${content}`;
        }).join('\n');

        const sent = await sendDiscordWebhook(userName, chatLog);
        if(!sent) addMessage('機器人', '⚠️ 聯絡 Discord Webhook 失敗，請稍後再試！', 'bot');
      }
    }, 1200);
  }

  // 主流程
  function processInput() {
    const textRaw = userInput.value.trim();
    if (!textRaw) return;

    const userNameRaw = usernameInput.value.trim() || '訪客';

    addMessage(userNameRaw, textRaw, 'user');
    userInput.value = '';
    sendBtn.disabled = true;

    // 先判斷是否是快捷按鈕命令（直接回覆）
    if (quickKeys.some(k => textRaw.toLowerCase() === k.toLowerCase())) {
      addBotReply(productInfo[textRaw], false);
      return;
    }

    // 取得回覆
    const replyObj = getReply(textRaw);
    if (!replyObj) {
      addBotReply('抱歉，我無法理解您的訊息，請嘗試其他關鍵字或描述您的需求。');
      return;
    }

    // 如果是送出類命令，要送Webhook
    if(replyObj.webhook){
      addBotReply(replyObj.reply, true, userNameRaw);
      return;
    }

    // 判斷是否為導頁（官網、DC等）
    const redirectKeys = ['折扣', '優惠', '打折', '折價', '特殊活動', '好康', '抽獎', '抽抽樂', '官網', '官方網站', '轉人工', '找客服','完成','送出'];
    for(const rk of redirectKeys){
      if(textRaw.toLowerCase().includes(rk.toLowerCase())){
        addBotReply(replyObj.reply);
        // 自動跳轉頁面
        if(rk === '官網' || rk === '官方網站'|| rk === '提交'|| rk === '送出'){
          setTimeout(() => window.open('https://goldenstar8787.github.io/auristar-on-line--store-/', '_blank'), 2000);
        }
        if(rk === '折扣' || rk === '優惠' || rk === '打折' || rk === '折價' || rk === '特殊活動' || rk === '好康' || rk === '抽獎' || rk === '抽抽樂' || rk === '轉人工' || rk === '找客服'|| rk === '提交'|| rk === '送出'){
          setTimeout(() => window.open('https://discord.gg/jt4ZvhnCDQ', '_blank'), 2000);
        }
        return;
      }
    }

    // 一般回覆
    addBotReply(replyObj.reply);
  }

  // UI 控制
  function updateSendBtn() {
    sendBtn.disabled = userInput.value.trim() === '';
  }

  // 綁定事件
  sendBtn.addEventListener('click', processInput);
  userInput.addEventListener('keydown', e => {
    if (e.key === 'Enter' && !sendBtn.disabled) {
      processInput();
    }
  });
  userInput.addEventListener('input', updateSendBtn);

  // 初始化
  addMessage('系統', welcomeMsg, 'bot');
  createQuickButtons();
  disableDevTools();
  updateSendBtn();

})();
</script>

</body>
</html>
